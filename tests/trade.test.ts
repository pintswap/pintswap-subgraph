import {
  assert,
  describe,
  test,
  beforeAll,
  afterAll
} from "matchstick-as/assembly/index"
import { ethereum, Address, BigInt } from "@graphprotocol/graph-ts"
import { parseTrade } from "../src/trade"
import { toByteArray } from "../src/evmdis";

// Tests structure (matchstick-as >=0.5.0)
// https://thegraph.com/docs/en/developer/matchstick/#tests-structure-0-5-0
const data = "0x583d60e43d3d73a0b86991c6218b36c1d19d4a2e9eb0ce3606eb485a7fd505accf0000000000000000000000000000000000000000000000000000000060005273bad7bd52dd2a31a7a9d4a9abbcb0556e26833fe460045230602452620f4240604452636478c6ce606452601c6084527f11638a393d2e0c5a335dbcf91610c8a10f7b43ac5a94906ce1daee5093295e6e60a4527f22f60e967861d41b4e5a0f1ec6864a756d1b929b98baa4c2106a377d5493294760c452f16000600060646000600073a0b86991c6218b36c1d19d4a2e9eb0ce3606eb485a7f23b872dd0000000000000000000000000000000000000000000000000000000060005273bad7bd52dd2a31a7a9d4a9abbcb0556e26833fe4600452731552b1a051430290f1b5e31f156e3cd501f520c3602452620f4240604452f11660006000610184600060006e22d473030f116ddee9f6b43ac78ba35a7f30f28b7a0000000000000000000000000000000000000000000000000000000060005273dac17f958d2ee523a2206206994597c13d831ec7600452620f4240602452636477761c604452636478c79c60645273bad7bd52dd2a31a7a9d4a9abbcb0556e26833fe4608452620f424060a452731552b1a051430290f1b5e31f156e3cd501f520c360c45261010060e4526041610104527f64b75d90acd7f70b608c6598e07bc99fd69c95222273960b244c641ae1ed80f3610124527f6311b27574957f4ee499a484408c64602f8955e9d55210d25b3356cd44ffd09d610144527f1b0000000000000000000000000000000000000000000000000000000000000061016452f1161561027457731552b1a051430290f1b5e31f156e3cd501f520c3ff5b60006000fd";

describe("trade.ts", () => {
  test("parseTrade", () => {
    const result = parseTrade(data, 1);
    console.log("gets token: " + result.gets.token);
    console.log("gives token: " + result.gives.token);
    console.log("gets amount: " + result.gets.amount);
    console.log("gives amount: " + result.gives.amount);
    console.log("to: " + result.taker);
    console.log("from: " + result.maker);
  })
})
